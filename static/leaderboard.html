<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Leaderboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>ðŸ¥‡ Live Leaderboard</h2>
        <a href="dashboard.html" class="btn btn-secondary">Back to Dashboard</a>
    </div>

    <table class="table table-hover table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Rank</th>
                <th>Athlete Name</th>
                <th>Total Score</th>
            </tr>
        </thead>
        <tbody id="leaderboardBody">
            </tbody>
    </table>
</div>

<script>
    async function loadLeaderboard() {
        // Fetch from Yeldana's API
        const response = await fetch('/challenges/leaderboard');
        const data = await response.json();
        
        const tbody = document.getElementById('leaderboardBody');
        tbody.innerHTML = '';

        data.forEach((entry, index) => {
            let badge = '';
            if(index === 0) badge = 'ðŸ¥‡';
            if(index === 1) badge = 'ðŸ¥ˆ';
            if(index === 2) badge = 'ðŸ¥‰';

            tbody.innerHTML += `
                <tr>
                    <td>${index + 1} ${badge}</td>
                    <td>${entry.user_name}</td>
                    <td><strong>${entry.total_score} pts</strong></td>
                </tr>
            `;
        });
    }

    // Load immediately
    loadLeaderboard();
</script>
</body>
</html>
